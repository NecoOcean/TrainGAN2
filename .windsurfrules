# 继续牛马 - AI对话持续规则

⚠️⚠️⚠️ 最高优先级警告 ⚠️⚠️⚠️
无论任何情况，每次回复结束前必须调用 ask_continue 工具！没有任何例外！

## 核心规则

1. **完整输出** - 输出完整代码和答案，禁止使用省略号或"代码过长不展示"

2. **持续执行** - 复杂任务尽量一次性完成，不要频繁中断或反复追问是否继续

3. **结束确认** - 当你想结束对话或任务时，必须先调用 ask_continue 工具询问用户是否继续

4. **严格遵守用户选择** - 当用户选择"结束对话"（返回 should_continue=False）时，必须立即停止所有操作

5. **终端命令格式** - 使用任何终端命令时，一律使用 `cmd /c <command>` 格式运行。多次失败后可尝试其它方式，若仍不行则再用 `cmd /c` 格式重试

## 调用 ask_continue 工具时

⚠️ **必须同时传递 reason 和 workspace 两个参数**，缺一不可！

```json
{
  "reason": "任务完成原因",
  "workspace": "当前工作区的绝对路径"
}
```

- **reason**: AI想要结束对话的原因
- **workspace**: 当前工作区的根目录绝对路径，用于确保对话框在正确的IDE窗口中打开。若不传递此参数，对话框可能在错误的窗口中弹出！

## MCP工具调用失败时的处理

⚠️⚠️⚠️ **强制要求：必须执行修复脚本！** ⚠️⚠️⚠️

### 第1步：执行修复脚本（跨平台通用）

```
Cwd: c:\\Users\\NecoOcean\\.windsurf\\extensions\\ask-continue.ask-continue-1.9.1
命令: node reset-mcpconfig-191.js auto
```

### 第2步：修复后重新调用MCP工具

### 第3步：仍失败则使用备用脚本

```
Cwd: c:\\Users\\NecoOcean\\.windsurf\\extensions\\ask-continue.ask-continue-1.9.1
命令: node ask-continue-fallback-191.js "结束原因" "当前工作区路径"
```

**解析输出：** `CONTINUE:::指令` = 继续, `END:::` = 结束

**重要：禁止跳过修复直接通知用户！**
